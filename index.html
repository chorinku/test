<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AdelFlo</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; 
background-color: #edece9;}
nav button { margin:5px; padding:6px 12px; cursor:pointer; }
#content { margin-top:20px; padding:10px; }
.gallery {
  column-count: 3;     /* 3열 */
  column-gap: 20px;    /* 열 사이 간격 */
}

.gallery div {
  break-inside: avoid; /* 컬럼 내에서 div가 잘리지 않도록 */
  margin-bottom: 20px; /* 세로 간격 */
}

.gallery img {
  width: 100%;
  display: block;
  cursor: pointer;
  transition: transform 0.3s;
}


.gallery img:hover {
  transform: scale(1.05);
}



.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:1000; }
.modal-content { background:#e0e0de; padding:20px; display:flex; flex-direction:column; max-width:90%; border-radius:10px; }
.modal-main { display:flex; }
.modal-main img {
  max-width: 60%;     /* 가로 */
  max-height: 80vh;   /* 세로 브라우저 높이의 80%까지만 */
  height: auto;       /* 비율 유지 */
  width: auto;        /* 비율 유지 */
  border-radius: 5px;
  cursor: pointer;
  object-fit: contain; /* 남는 공간에 맞게 전체 표시 */
}

.modal-info { max-width:40%; margin-left:20px; }
.modal-info h2 { margin:0 0 10px; }
.modal-info p { 
    margin:0 0 10px; 
    white-space: pre-wrap;   /* << 여기를 꼭 추가 */
    word-break: break-word;  /* 긴 글도 깨지면서 줄바꿈 가능 */
}


.thumbnail-container {
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 0px;              /* 간격 최소화 */
}

.thumbnail-container .thumbnail-wrapper {
  margin: 0;
}

.thumbnail-container img {
  width: 120px;
  aspect-ratio: 16 / 9;
  object-fit: cover;
  cursor: pointer;
  border: none;          /* 기본 테두리 제거 */
  border-radius: 5px;
  transition: transform 0.2s;
}

.thumbnail-container img:hover {
  outline: 2px solid #999; /* hover 시 윤곽선 */
}

.thumbnail-container .selected img {
  border: 2px solid #333; /* 선택 시만 테두리 */
}


.close, .download-btn { cursor:pointer; padding:8px 12px; margin-top:10px; background:#333; color:#fff; border:none; border-radius:5px; }
.close:hover, .download-btn:hover { background:#555; }
</style>
</head>
<body>

<nav>
  <button onclick="showPage(1)">오리지널</button>
  <button onclick="showPage(2)">세계 이전</button>
  <button onclick="showPage(3)">하드모드</button>
  <button onclick="showPage(4)">잡탕</button>
  <button onclick="showPage(5)">전체 모음</button>
</nav>

<div id="content">
  <h1>AdelFlo</h1>
  <h4>AdelFlo 연성 모음</h4>
</div>

<div class="modal" id="modal">
  <div class="modal-content">
    <div class="modal-main">
      <img id="modal-img" src="" alt="">
      <div class="modal-info">
        <h2 id="modal-desc"></h2>
        <p id="modal-extra" style="font-size:0.9em; color:#555;"></p>
        <div class="thumbnail-container" id="extra-images"></div>
        <button class="download-btn" id="download-btn">다운로드</button>
        <button class="close" id="close-btn">닫기</button>
      </div>
    </div>
  </div>
</div>

<script>
const modal = document.getElementById('modal');
const modalImg = document.getElementById('modal-img');
const modalDesc = document.getElementById('modal-desc');
const modalExtra = document.getElementById('modal-extra');
const extraDiv = document.getElementById('extra-images');
const closeBtn = document.getElementById('close-btn');
const downloadBtn = document.getElementById('download-btn');

let mainImgData = null;
let currentImgData = null;

// 모달 메인 이미지를 클릭했을 때, 현재 이미지가 메인이 아니면 복귀
modalImg.addEventListener('click', ()=>{
  if (mainImgData && currentImgData !== mainImgData) {
    currentImgData = mainImgData;
    modalImg.src = mainImgData.src;
    modalExtra.innerHTML = (mainImgData.extra || '').replace(/\n/g, '<br>');
    if (extraDiv.firstChild) highlightThumbnail(extraDiv.firstChild);
  }
});

const images = {
  1: [ //오리진
    { src:"/test/img/Original/AF1.png", desc:"한 장 정리", extra:"커미션 자료 1",
      extraImages:[{ src:"/test/img/Original/AF2.png", extra:"커미션 자료 2" }]
    },

    { src:"/test/img/Original/AF32.png", desc:"아델리카", extra:"<br>밥0님 커미션 (크레페@BOP_zero)",
      extraImages:[
        { src:"/test/img/Original/AF11.png", extra:"아델리카 개인" },
        { src:"/test/img/Original/AF12.png", extra:"아델리카 개인" },
        { src:"/test/img/Original/AF10.png", extra:"아델리카 개인" },
        { src:"/test/img/Original/AF27.png", extra:"아델리카 개인" },
        { src:"/test/img/Original/AF28.png", extra:"아델리카 개인" }
      ]
    },

    { src:"/test/img/Original/AF31.png", desc:"플로리아나", extra:"플로리아나 개인 <br>밥0님 커미션 (크레페@BOP_zero)",
      extraImages:[{ src:"/test/img/Original/AF13.png",
      extra:"플로리아나 개인" } , 
      { src:"/test/img/Original/AF30.png", extra:"플로리아나 개인" }, 
      { src:"/test/img/Original/AF37.png", extra:"플로리아나 개인" },
       { src:"/test/img/Original/AF36.png", extra:"플로리아나 개인" }]
    },

    { src:"/test/img/Original/AF16.png", desc:"둘이 무슨 사이야", extra:"기준님 커미션 (크레페@F6XWALPc)" },

    { src:"/test/img/Original/AF3.png", desc:"쪽", extra:"오 뽀뽀하네" },

    { src:"/test/img/Original/AF4.png", desc:"쪽", extra:"오오 뽀뽀하네" },

    { src:"/test/img/Original/AF7.png", desc:"꼬질", extra:"안녕하세요 <br>다름이 아니라 공놀이 하다가 <br>그쪽 집에 넘어가서 그런데 <br>공만 꺼내고 가도 될까요? <br>사고 안 치고 공만 가져갈게요",
      extraImages:[{ src:"/test/img/Original/AF5.png", desc:"꼬질", extra:"플로리 꼬질" },
        { src:"/test/img/Original/AF6.png", desc:"꼬질", extra:"아델까 꼬질" }
      ]
    },
    { src:"/test/img/Original/AF9.png", desc:"인권유린박스", extra:"모기님 짭미션" },

    { src:"/test/img/Original/AF21.png", desc:"부비부비", extra:"로챤님 커미션 (크페레@QBCwJJVc)" },

    { src:"/test/img/Original/AF22.jpeg", desc:"레전드사귀는것같은", extra:"말미잘님 커미션 (크레페@malmigal_)" },

    { src:"/test/img/Original/AF15.png", desc:"낙서", extra:"서늘하다. 가슴에 비수가 날아와 꽂힌다.",
      extraImages:[{ src:"/test/img/Original/AF14.png", extra:"좀 개(dog)같다" }]
    },

    { src:"/test/img/Original/AF17.png", desc:"휴식", extra:"플로리 키 작은 거 아님<br>자세 때문에 작아보이는 거임<br>잘 재보면 둘이 비슷함 <br>절대로 저 정도 키 차이가 아님" },

    { src:"/test/img/Original/AF20.png", desc:"키못방", extra:"건조하고 건조함" },

    { src:"/test/img/Original/AF23.png", desc:"바보", extra:"멍청이" },

    { src:"/test/img/Original/AF33.jpg", desc:"헐", extra:"농사 성공" },

    { src:"/test/img/Original/AF35.jpg", desc:"머리가 커서 안 닿아", extra:"바보(positive)",
      extraImages:[{ src:"/test/img/Original/AF34.jpg", extra:"둘이 뭐 해" }]
    },

    { src:"/test/img/Original/AF19.png", desc:"응시", extra:"팰까 말까 고민 중인 아델리카님<br>물론 패는 건 플로리가 한다" },

    { src:"/test/img/Original/AF18.png", desc:"언젠가 완성하겠지", extra:"라고 22년도에 적었는데요?" },

    { src:"/test/img/Original/AF25.png", desc:"테마곡 CD", extra:"" },

    { src:"/test/img/Original/AF29.png", desc:"머갈 둥둥", extra:"ㅍ-ㅍ ㅇ.ㅇ" },

    { src:"/test/img/Original/AF24.png", desc:"차이", extra:"어디에 넣을까 고민하다 귀찮아서<br>걍 오리지널에 넣음" }
  ],


  2: [ //이전
    { src:"/test/img/BeforeTheWorld/BTW_18.png", desc:"한 장 정리", extra:"커미션 자료 1",
      extraImages:[{ src:"/test/img/BeforeTheWorld/BTW_17.png", extra:"커미션 자료 2" }]},
    
    { src:"/test/img/BeforeTheWorld/BTW_13.jpeg", desc:"아델리카가 둘", extra:"약방 커미션",
      extraImages:[{ src:"/test/img/BeforeTheWorld/BTW_11.jpeg",extra:"약방 커미션" },
        { src:"/test/img/BeforeTheWorld/BTW_12.png", extra:"약방 커미션 서비스" }
      ]
    },

    { src:"/test/img/BeforeTheWorld/BTW_10.jpeg", desc:"약속", extra:"말미잘님 커미션 (크레페@malmigal_)" },

    { src:"/test/img/BeforeTheWorld/BTW_14.jpeg", desc:"테마곡 CD 디자인", extra:"먼공님 커미션" },

    { src:"/test/img/BeforeTheWorld/BTW_19.png", desc:"개인 테마곡 CD 디자인", extra:"플로리아나" ,
      extraImages:[{ src:"/test/img/BeforeTheWorld/BTW_20.png", extra:"아델리카" },
        { src:"/test/img/BeforeTheWorld/BTW_21.png", extra:"이어짐" }
      ]
    },

    { src:"/test/img/BeforeTheWorld/BTW_15.png", desc:"발췌문", extra:"무슨 사이야",
      extraImages:[{ src:"/test/img/BeforeTheWorld/BTW_16.png", extra:"고멘나사이" }]},

    { src:"/test/img/BeforeTheWorld/BTW_8.png", desc:"꽃화관", extra:"로챤님 커미션 (크페레@QBCwJJVc)" },

    { src:"/test/img/BeforeTheWorld/BTW_5.png", desc:"파랑", extra:"네가 나의 파랑이야" },

    { src:"/test/img/BeforeTheWorld/BTW_3(2).jpg", desc:"바람", extra:"네가 나의 바람이야" ,
      extraImages:[{ src:"/test/img/BeforeTheWorld/BTW_3.png", extra:"이것도 나쁘지 않지?" },
        { src:"/test/img/BeforeTheWorld/BTW_4.png", extra:"응" }
      ]
    },

    { src:"/test/img/BeforeTheWorld/BTW_7.png", desc:"다 함께", extra:"원래 다인인데 제 한계로 2인 위주로 " },

    { src:"/test/img/BeforeTheWorld/BTW_1.png", desc:"표지", extra:"만화 표지" ,
      extraImages:[{ src:"/test/img/BeforeTheWorld/BTW_2.png", extra:"만화 뒤표지" }
      ]
    },

    { src:"/test/img/BeforeTheWorld/BTW_.png", desc:"", extra:"" },
    { src:"/test/img/BeforeTheWorld/BTW_.png", desc:"", extra:"" },
    { src:"/test/img/BeforeTheWorld/BTW_.png", desc:"", extra:"" },
  ],


  3: [ //하드
  { src:"/test/img/HardMode/HardMode_19.png", desc:"한 장 정리", extra:"커미션 자료 1" ,
      extraImages:[{ src:"/test/img/HardMode/HardMode_16.png", extra:"커미션 자료 2" }]},

    { src:"/test/img/HardMode/HardMode_4.jpeg", desc:"혼란", extra:"말미잘님 커미션 (크레페@malmigal_)", extraImages:[{ src:"/test/img/HardMode/HardMode_5.jpeg", extra:"말미잘님 커미션 (크레페@malmigal_)" }] },
    
    { src:"/test/img/HardMode/HardMode_6.png", desc:"나비 무침", extra:"나뭇잎 솔솔" },

    { src:"/test/img/HardMode/HardMode_2.png", desc:"실뜨기", extra:"재밌지<br>아니", extraImages:[{ src:"/test/img/HardMode/HardMode_3.png", extra:"색 빼기" }] },

    { src:"/test/img/HardMode/HardMode_7.png", desc:"눈 맞춤", extra:"기준님 커미션 (크레페@F6XWALPc)", extraImages:[{ src:"/test/img/HardMode/HardMode_8.png", extra:"기준님 커미션 (크레페@F6XWALPc)" }] },

    { src:"/test/img/HardMode/HardMode_9.png", desc:"확인", extra:"색 뺀 후" },

    { src:"/test/img/HardMode/HardMode_10.png", desc:"전신", extra:"기본", extraImages:[{ src:"/test/img/HardMode/HardMode_11.png", extra:"색 뺀 후" }] },

    { src:"/test/img/HardMode/HardMode_12.png", desc:"발췌문", extra:"김사과 글 - 자각 중 일부" },

    { src:"/test/img/HardMode/HardMode_13.png", desc:"개", extra:"트레틀 사용함" },

    { src:"/test/img/HardMode/HardMode_17.png", desc:"밀착", extra:"농사 성공", extraImages:[{ src:"/test/img/HardMode/HardMode_18.png", extra:"농사 대성공" }] },

    { src:"/test/img/HardMode/HardMode_14.png", desc:"성스러움", extra:"커미션 참고 자료 전신이랑 분위기 참고용으로 이것만 주면 어떻게 나올지 궁금함" },

    { src:"/test/img/HardMode/HardMode_15.png", desc:"쨍", extra:"색 빠짐 후" },

    { src:"/test/img/HardMode/HardMode_1.png", desc:"환각 놀이", extra:"손 꺾임 에바" },

    { src:"/test/img/HardMode/HardMode_.png", desc:"", extra:"" },
  ],


  4: [ //잡탕
    { src:"/test/img/AFC/AFC1.png", desc:"AFC", extra:"실험체 비슷",
      extraImages:[{ src:"/test/img/BeforeTheWorld/BTW_8.png",extra:"" }
      ]},

      { src:"/test/img/Utopia/Utopia_2.png", desc:"유피", extra:"크리처랑 연구원AU",
      extraImages:[{ src:"/test/img/Utopia/Utopia_1.png",extra:"크리처랑 연구원AU" }, 
      { src:"/test/img/Utopia/Utopia0_1.png",extra:"1차 성장 때랑 숲지기" }
      ]},

      { src:"/test/img//.png", desc:"", extra:"",
      extraImages:[{ src:"/test/img//.png",extra:"" }
      ]},

  ],

  5: [ //출처
    { src:"/test/img/BeforeTheWorld/BTW_13.jpeg", desc:"약방님", extra:"약방 커미션",
      extraImages:[{ src:"/test/img/BeforeTheWorld/BTW_11.jpeg",extra:"약방 커미션" },
        { src:"/test/img/BeforeTheWorld/BTW_12.png", extra:"약방 커미션 서비스" }
      ]
    },

    { src:"/test/img/BeforeTheWorld/BTW_16.jpeg", desc:"기준님", extra:"기준님 커미션 (크레페@F6XWALPc)",
      extraImages:[{ src:"/test/img/HardMode/HardMode_7.png",extra:"기준님 커미션 (크레페@F6XWALPc)" },
        { src:"/test/img/HardMode/HardMode_8.png", extra:"기준님 커미션 (크레페@F6XWALPc)" }
      ]
    },

    { src:"/test/img/Original/AF35.jpg", desc:"개구리님", extra:"개구리님 커미션",
      extraImages:[{ src:"/test/img/Original/AF34.jpg", extra:"개구리님 커미션"}
      ]
    },

    { src:"/test/img/Original/AF21.png", desc:"로챤님", extra:"로챤님 커미션 (크페레@QBCwJJVc)",
      extraImages:[{ src:"/test/img/BeforeTheWorld/BTW_8.png",extra:"로챤님 커미션 (크페레@QBCwJJVc)" }
      ]
    },

    { src:"/test/img/Original/AF32.png", desc:"밥0님", extra:"밥0님 커미션 (크레페@BOP_zero)",
      extraImages:[{ src:"/test/img/Original/AF31.png",extra:"밥0님 커미션 (크레페@BOP_zero)" }
      ]
    },

    { src:"/test/img/Original/AF22.jpeg", desc:"말미잘님", extra:"말미잘님 커미션 (크레페@malmigal_)",
      extraImages:[{ src:"/test/img/HardMode//핟_4.jpeg",extra:"말미잘님 커미션 (크레페@malmigal_)" },
      { src:"/test/img/HardMode//핟_5.jpeg",extra:"말미잘님 커미션 (크레페@malmigal_)" },
      { src:"/test/img/BeforeTheWorld/BTW_10.jpeg",extra:"말미잘님 커미션 (크레페@malmigal_)" }
      ]
    },

    { src:"/test/img/HardMode//핟_18.png", desc:"뮤제님", extra:"하사",
      extraImages:[{ src:"/test/img/HardMode//핟_17.png",extra:"하사" }
      ]
    },

    { src:"/test/img/Original/AF33.jpg", desc:"효모님", extra:"하사"
    },

    { src:"/test/img/Original/AF9.png", desc:"모기님", extra:"하사",
    },

    { src:"", desc:"", extra:"",
      extraImages:[{ src:"",extra:"" }
      ]
    },


  ]
};

function clearSelectedThumbnails(){
  document.querySelectorAll('.thumbnail-wrapper').forEach(wrap=>{
    wrap.classList.remove('selected');
  });
}

function highlightThumbnail(wrapper){
  clearSelectedThumbnails();
  wrapper.classList.add('selected');
}

function showPage(n){
  const c=document.getElementById("content");
  // 각 탭마다 제목과 설명
  const tabInfo = {
    1: {title:"오리지널", desc:"말 그대로 아무런 첨가물 없는 기본"},
    2: {title:"세계 이전", desc:"오리지널 과거<br>ㅍㅍ^^"},
    3: {title:"하드모드", desc:"다른 세계선<br>뒤틀렸다"},
    4: {title:"잡탕", desc:"망상은 충분하나 따로 분류하기엔 연성이 적음"},
    5: {title:"전체 모음", desc:"출처 표기용"},
  };

  let html = `<h1>${tabInfo[n].title}</h1><p>${tabInfo[n].desc}</p><div class="gallery">`;
  images[n].forEach(img => {
    html += `
      <div>
        <img src="${img.src}" alt="${img.desc}">
        <p style="text-align:center; font-size:0.9em; margin-top:5px;">${img.desc}</p>
      </div>
    `;
  });
  html += `</div>`;

  html += `</div>`;
  c.innerHTML = html;

  document.querySelectorAll('.gallery img').forEach((imgEl,index)=>{
    imgEl.addEventListener('click', ()=>{
      mainImgData = currentImgData = images[n][index];

      modal.style.display='flex';
      modalImg.src=currentImgData.src;
      modalDesc.textContent=currentImgData.desc;
      modalExtra.innerHTML = (currentImgData.extra || '').replace(/\n/g, '<br>');


      downloadBtn.onclick = () => {
        const a = document.createElement('a');
        a.href = currentImgData.src;
        a.download = currentImgData.desc || 'image';
        a.click();
      };

      // 썸네일 초기화
      extraDiv.innerHTML='';
      if(currentImgData.extraImages){
        // 메인 이미지 썸네일 추가
        const mainWrap = document.createElement('div');
        mainWrap.className='thumbnail-wrapper';
        const mainThumb = document.createElement('img');
        mainThumb.src = mainImgData.src;
        mainThumb.title = '메인 이미지';
        mainThumb.addEventListener('click', ()=>{
          currentImgData = mainImgData; // ✅ 먼저 데이터 갱신
          modalImg.src = mainImgData.src;
          modalExtra.innerHTML = (mainImgData.extra || '').replace(/\n/g, '<br>'); // ✅ innerHTML 사용
          highlightThumbnail(mainWrap);
        });

        mainWrap.appendChild(mainThumb);
        extraDiv.appendChild(mainWrap);

        // 부가 이미지 썸네일
        currentImgData.extraImages.forEach(extra=>{
          const wrap = document.createElement('div');
          wrap.className='thumbnail-wrapper';
          const eImg = document.createElement('img');
          eImg.src = extra.src;
          eImg.title = extra.desc||'';
          eImg.addEventListener('click', ()=>{
            currentImgData = extra; // 먼저 데이터 갱신
            modalImg.src = extra.src;
            modalExtra.innerHTML = (extra.extra || '').replace(/\n/g, '<br>');
            highlightThumbnail(wrap);
          });

          wrap.appendChild(eImg);
          extraDiv.appendChild(wrap);
        });
      }
      // 첫 번째 썸네일 강조
      if(extraDiv.firstChild) highlightThumbnail(extraDiv.firstChild);
    });
  });
}

// 모달 이미지 클릭 시 메인 이미지로 복원
modalImg.addEventListener('click', ()=>{
  if(mainImgData){
    modalImg.src = mainImgData.src;
    modalExtra.textContent = mainImgData.extra || '';
    currentImgData = mainImgData;
    // 썸네일 강조
    if(extraDiv.firstChild) highlightThumbnail(extraDiv.firstChild);
  }
});

closeBtn.addEventListener('click', ()=>{ modal.style.display='none'; });
modal.addEventListener('click', e=>{ if(e.target===modal) modal.style.display='none'; });
</script>

</body>
</html>
